[{"D:\\unid100\\Uni-D_2\\src\\index.js":"1","D:\\unid100\\Uni-D_2\\src\\App.js":"2","D:\\unid100\\Uni-D_2\\src\\reportWebVitals.js":"3","D:\\unid100\\Uni-D_2\\src\\pages\\Attendence.js":"4","D:\\unid100\\Uni-D_2\\src\\pages\\CardView.js":"5","D:\\unid100\\Uni-D_2\\src\\components\\Landing.js":"6","D:\\unid100\\Uni-D_2\\src\\components\\BookShelf.js":"7","D:\\unid100\\Uni-D_2\\src\\components\\AddWidget.js":"8","D:\\unid100\\Uni-D_2\\src\\pages\\Loader.js":"9","D:\\unid100\\Uni-D_2\\src\\firebase-config.js":"10","D:\\unid100\\Uni-D_2\\src\\components\\Navbar.js":"11","D:\\unid100\\Uni-D_2\\src\\pages\\Loader2.js":"12","D:\\unid100\\Uni-D_2\\src\\components\\AvailIssue.js":"13","D:\\unid100\\Uni-D_2\\src\\components\\ListOfBooks.js":"14","D:\\unid100\\Uni-D_2\\src\\components\\SuggestedBook.js":"15","D:\\unid100\\Uni-D_2\\src\\components\\UnavailReturn.js":"16","D:\\unid100\\Uni-D_2\\src\\components\\BookItem.js":"17"},{"size":517,"mtime":1665685504797,"results":"18","hashOfConfig":"19"},{"size":3045,"mtime":1665685504782,"results":"20","hashOfConfig":"19"},{"size":375,"mtime":1665685504803,"results":"21","hashOfConfig":"19"},{"size":4627,"mtime":1665685504798,"results":"22","hashOfConfig":"19"},{"size":7924,"mtime":1665685504800,"results":"23","hashOfConfig":"19"},{"size":269,"mtime":1665685504789,"results":"24","hashOfConfig":"19"},{"size":4137,"mtime":1667578208807,"results":"25","hashOfConfig":"19"},{"size":4554,"mtime":1665685504785,"results":"26","hashOfConfig":"19"},{"size":136,"mtime":1665685504801,"results":"27","hashOfConfig":"19"},{"size":763,"mtime":1665685504795,"results":"28","hashOfConfig":"19"},{"size":2004,"mtime":1665685504791,"results":"29","hashOfConfig":"19"},{"size":125,"mtime":1665685504802,"results":"30","hashOfConfig":"19"},{"size":1465,"mtime":1665685504786,"results":"31","hashOfConfig":"19"},{"size":470,"mtime":1665685504790,"results":"32","hashOfConfig":"19"},{"size":817,"mtime":1667578679779,"results":"33","hashOfConfig":"19"},{"size":839,"mtime":1665685504794,"results":"34","hashOfConfig":"19"},{"size":107,"mtime":1665685504786,"results":"35","hashOfConfig":"19"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"1pue870",{"filePath":"39","messages":"40","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"38"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"38"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"38"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"38"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"38"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"38"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},"D:\\unid100\\Uni-D_2\\src\\index.js",[],["77","78"],"D:\\unid100\\Uni-D_2\\src\\App.js",["79","80","81","82","83","84","85"],"import React, { useState } from \"react\";\r\nimport QrReader from \"react-qr-reader\";\r\nimport { CardView } from \"./pages/CardView\";\r\nimport { Attendence } from \"./pages/Attendence\";\r\nimport { Landing } from \"./components/Landing\";\r\n\r\nfunction App() {\r\n  const [scanResultWebCam, setScanResultWebCam] = useState(\"\");\r\n  const [scanNameWebCam, setScanNameWebCam] = useState(\"\");\r\n  const [currentFunction, setCurrentFunction] = useState(\"Lib\");\r\n  const [manualinput, setManualinput] = useState(\"\");\r\n\r\n  const handleClickLibrary = (error) => {\r\n    setCurrentFunction(\"Lib\");\r\n  };\r\n  const handleClickCafeteria = (error) => {\r\n    setCurrentFunction(\"Caf\");\r\n  };\r\n  const handleClickAttendence = (error) => {\r\n    setCurrentFunction(\"Att\");\r\n  };\r\n\r\n  const handleErrorWebCam = (error) => {\r\n    console.log(error);\r\n  };\r\n  const handleScanWebCam = (result) => {\r\n    if (result) {\r\n      setScanResultWebCam(result.substr(58, 4));\r\n      const myArr = result.split(\",\");\r\n      setScanNameWebCam(myArr[2].substr(7));\r\n      console.log(result);\r\n    }\r\n  };\r\n  const manualentry = (result) => {\r\n    if (result) {\r\n      setScanResultWebCam(manualinput);\r\n      console.log(result);\r\n    }\r\n  };\r\n  return (\r\n    <>\r\n\r\n      {scanResultWebCam == \"\" ? (\r\n          <div className=\"flex flex-col justify-center items-center\">\r\n            <div className=\"hero min-h-screen bg-base-200\">\r\n              <div className=\"hero-content flex-col lg:flex-row-reverse\">\r\n                <div className=\"text-center lg:text-left min-w-full p-6\">\r\n                  <h1 className=\"text-5xl font-bold\">Welcome to unid!</h1>\r\n                  {/* <p className=\"py-6 text-center\">Scan your College - ID card to proceed.</p> */}\r\n                  <div className=\"flex flex-row place-content-evenly p-2 bg-green-500 rounded-md mt-4 bg-base-200 \">\r\n                    <input\r\n                      placeholder=\"type 8947 to test\"\r\n                      className=\"border-2 rounded-md p-2 input\"\r\n                      \r\n                      onChange={(e) => {\r\n                        setManualinput(e.target.value);\r\n                        console.log(manualinput);\r\n                      }}\r\n                    />\r\n                    <button\r\n                      className=\"ml-4 p-2 btn rounded-md\"\r\n                      onClick={manualentry}\r\n                    >\r\n                      CHECK\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <div className=\"card flex-shrink-0 w-full max-w-md shadow-2xl bg-red-100\">\r\n                <QrReader\r\n                    delay={300}\r\n                    style={{ width: \"100%\" }}\r\n                    onError={handleErrorWebCam}\r\n                    onScan={handleScanWebCam}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n      ) : (\r\n            <CardView scanResultWebCam={scanResultWebCam} scanNameWebCam={scanNameWebCam} />\r\n        )}\r\n      </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","D:\\unid100\\Uni-D_2\\src\\reportWebVitals.js",[],"D:\\unid100\\Uni-D_2\\src\\pages\\Attendence.js",["86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107"],"import React, { useState, useEffect } from \"react\";\r\nimport { addDoc, collection } from \"firebase/firestore\";\r\nimport { AddWidget } from \"../components/AddWidget\";\r\nimport { db } from \"../firebase-config\";\r\nimport {\r\n  deleteDoc,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n} from \"firebase/firestore\";\r\n\r\nexport const Attendence = (props) => {\r\n  const [rollno, fetchedRollno] = useState(\"8947\");\r\n  const [admno, setAdmnno] = useState(\"??\");\r\n  const [name, setName] = useState(\"??\");\r\n  const [card1, setCard1] = useState(\"??\");\r\n  const [card2, setCard2] = useState(\"??\");\r\n  const [card3, setCard3] = useState(\"??\");\r\n  const [imgList, setImgList] = useState([]);\r\n  const userRef = collection(db, \"users\");\r\n  console.log(props.scanResultWebCam)\r\n  const [currNo, setCurrNo] = useState(\"8947\");\r\n\r\n\r\n\r\n\r\n  // const q = query(userRef, where());\r\n  useEffect(() => {\r\n    // const q = query(collection(db, \"users\"), where(\"admno\", \"==\", \"8947\"));\r\n    // const querySnapshot = getDocs(q);\r\n    // querySnapshot.forEach((doc) => {\r\n    //   // doc.data() is never undefined for query doc snapshots\r\n    //   console.log(doc.id, \" => \", doc.data());\r\n    // });\r\n    // if (!query.empty) {\r\n    //   const snapshot = query.docs[0];\r\n    //   const data = snapshot.data();\r\n    //   console.log(data);\r\n    // } else {\r\n    //   console.log(\"not found\");\r\n    // }\r\n    // const userRef2 = doc(db, \"users\", \"dAb0YnLzD8fgdyBeRr3Z\");\r\n    // getDoc(userRef2).then((doc) => {\r\n    //   console.log(doc.data(), doc.id);\r\n    // });\r\n    const getUserList = async () => {\r\n      console.log(\"reading\");\r\n      const data = await getDocs(userRef);\r\n      // console.log(\"image data\", data);\r\n      setImgList(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n      // console.log(imgList);\r\n    };\r\n    setCurrNo(props.scanResultWebCam)\r\n\r\n    getUserList();\r\n  }, []);\r\n\r\n  // const userRef = collection(db, \"users\");\r\n  // useEffect(() => {\r\n  //   const getCard = async () => {\r\n  //     const data = await getDocs(userRef);\r\n  //     console.log(\"hi\", data);\r\n  //     setProductList(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n  //   };\r\n\r\n  //   getProducts();\r\n  // }, []);\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center h-screen\">\r\n      <p className=\"text-green-500 text-[64px] my-4\">UNI-ID</p>\r\n      <div className=\"m-auto text-2xl\">\r\n        <div className=\"bg-green-500 p-3 text-white rounded-md shadow-md\">\r\n          {/* <p>STUDENT: DEB</p>\r\n          <p>ADMISSION NUMBER:8947</p> */}\r\n          <div className=\"bg-white p-3 text-green-500 mt-2 rounded-md space-y-4 space-x-4\">\r\n            {/* <AddWidget cardnumber={\"1\"} cardstatus={card1} />\r\n            <AddWidget cardnumber=\"2\" cardstatus={card2} />\r\n            <AddWidget cardnumber=\"3\" cardstatus={card3} /> */}\r\n\r\n            {imgList.map((item) => {\r\n              console.log(\"ITEM LOGGED IS \", item);\r\n              console.log(props.scanResultWebCam)\r\n              \r\n\r\n              \r\n              // console.log(\"inside function\");\r\n              //REPLACE 8947 WITH THE INT VALUE OBTAINED FROM QR CODE.\r\n              if (item.admno == props.scanResultWebCam)\r\n                return (\r\n                  <AddWidget\r\n                    key={item.id}\r\n                    name={item.name}\r\n                    admno={item.admno}\r\n                    card1={item.card1}\r\n                    card2={item.card2}\r\n                    card3={item.card3}\r\n                  />\r\n                );\r\n         \r\n            }\r\n            \r\n            \r\n            )}\r\n\r\n            {/* <div className=\"flex flex-row justify-between items-center space-x-16\">\r\n              <p>CARD 1: AVAILABLE</p>\r\n              <p className=\"bg-green-500 text-white p-2 rounded-md hover:scale-105\">\r\n                ISSUE BOOK\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-row justify-between items-center space-x-16 text-red-600\">\r\n              <p>CARD 2: UNAVAILABLE</p>\r\n              <p className=\"bg-red-500 text-white p-2 rounded-md hover:scale-105\">\r\n                DETAILS\r\n              </p>\r\n            </div>\r\n            <div className=\"flex flex-row justify-between items-center space-x-16\">\r\n              <p>CARD 3: ISSUED</p>\r\n              <p className=\"bg-green-500 text-white p-2 rounded-md hover:scale-105\">\r\n                ISSUE BOOK\r\n              </p>\r\n            </div> */}\r\n          </div>\r\n          <div className=\"bg-green-400 rounded-md mt-4 p-2 text-center\">\r\n            Attendence\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","D:\\unid100\\Uni-D_2\\src\\pages\\CardView.js",["108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125"],"import React, { useState, useEffect } from \"react\";\r\nimport { addDoc, collection, updateDoc } from \"firebase/firestore\";\r\nimport { AddWidget } from \"../components/AddWidget\";\r\nimport { db } from \"../firebase-config\";\r\nimport {\r\n  deleteDoc,\r\n  doc,\r\n  getDoc,\r\n  getDocs,\r\n  query,\r\n  where,\r\n} from \"firebase/firestore\";\r\nimport { RepeatRounded } from \"@material-ui/icons\";\r\nimport { Loader } from \"./Loader\";\r\nimport { Loader2 } from \"./Loader2\";\r\nimport { BookShelf } from \"../components/BookShelf\";\r\nimport Navbar from \"../components/Navbar\";\r\nexport const CardView = (props) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [found, setFound] = useState(false);\r\n  const [imgList, setImgList] = useState([]);\r\n  const [validbooklist, setValidbooklist] = useState([]);\r\n  const userRef = collection(db, \"users\");\r\n  const mysecondlist = [];\r\n  console.log(props.scanResultWebCam);\r\n\r\n  const updateItem = async (docid) => {\r\n    setLoading(true);\r\n    const docRef = doc(db, \"users\", docid);\r\n    await updateDoc(docRef, { card3: \"unAVail\" });\r\n    setLoading(false);\r\n  };\r\n\r\n  const displayList = () => {};\r\n\r\n  const addItem = async () => {\r\n    await addDoc(userRef, {\r\n      admno: props.scanResultWebCam,\r\n      card1: \"available\",\r\n      card2: \"available\",\r\n      card3: \"available\",\r\n      name: \"test\",\r\n    });\r\n    console.log(\"reading\");\r\n    const data = await getDocs(userRef);\r\n    console.log(\"datalogged is\", data);\r\n    // console.log(\"image data\", data);\r\n    setImgList(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n  };\r\n\r\n  // const q = query(userRef, where());\r\n  useEffect(() => {\r\n    const booklistref = collection(db, \"books\");\r\n    // console.log(\"LOGGED ONCE INSIDE USEFFFECT IN CARDVIEW\");\r\n    // getDocs(booklistref)\r\n    //   .then((response) => {\r\n    //     response.docs.map((doc) => {\r\n    //       console.log(\"brooO \" + doc.data().name + \" and \" + doc.id);\r\n    //       setValidbooklist(\r\n    //         validbooklist.push({ name: doc.data().name, id: doc.id })\r\n    //       );\r\n    //     });\r\n\r\n    //     // setValidbooklist(\r\n    //     //   response.docs.map((doc) => ({ ...doc.data(), id: doc.id }))\r\n    //     // );\r\n    //   })\r\n    //   .catch((error) => console.log(error))\r\n    //   .finally(console.log(\"second list is \", mysecondlist));\r\n\r\n    const getbooklist = async () => {\r\n      const data = await getDocs(booklistref);\r\n      // console.log(\"hi\", data);\r\n      setValidbooklist(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n    };\r\n    // const q = query(collection(db, \"users\"), where(\"admno\", \"==\", \"8947\"));\r\n    // const querySnapshot = getDocs(q);\r\n    // querySnapshot.forEach((doc) => {\r\n    //   // doc.data() is never undefined for query doc snapshots\r\n    //   console.log(doc.id, \" => \", doc.data());\r\n    // });\r\n    // if (!query.empty) {\r\n    //   const snapshot = query.docs[0];\r\n    //   const data = snapshot.data();\r\n    //   console.log(data);\r\n    // } else {\r\n    //   console.log(\"not found\");\r\n    // }\r\n    // const userRef2 = doc(db, \"users\", \"dAb0YnLzD8fgdyBeRr3Z\");\r\n    // getDoc(userRef2).then((doc) => {\r\n    //   console.log(doc.data(), doc.id);\r\n    // });\r\n\r\n    const getUserList = async () => {\r\n      setLoading(true);\r\n      let found2 = false;\r\n      console.log(\"reading\");\r\n      const userRef2 = collection(db, \"users\");\r\n\r\n      const data2 = await getDocs(userRef2);\r\n      setLoading(false);\r\n      console.log(\"datalogged is\", data2);\r\n      console.log(\"image data\", data2);\r\n      const myNewList = data2.docs.map((doc) => ({\r\n        ...doc.data(),\r\n        id: doc.id,\r\n      }));\r\n      console.log(myNewList);\r\n      myNewList.map((item) => {\r\n        if (item.admno == props.scanResultWebCam) {\r\n          console.log(\r\n            props.scanResultWebCam,\r\n            \"and\",\r\n            item.admno,\r\n            \"found st to true\"\r\n          );\r\n          found2 = true;\r\n        }\r\n\r\n        // }\r\n\r\n        // )\r\n        //   if(found==false){\r\n        //     console.log('calling adddoc inside useeffect')\r\n        // await addDoc(userRef, {admno:props.scanResultWebCam,card1:\"available\",card2:\"available\",card3:\"available\",name:\"test\"});\r\n\r\n        //   }\r\n        // console.log(imgList);\r\n      });\r\n      if (found2 == false) {\r\n        console.log(\"calling adddoc inside useeffect\");\r\n        await addDoc(userRef, {\r\n          admno: props.scanResultWebCam,\r\n          name: props.scanNameWebCam,\r\n          // card1: { bookname: \"=\" },\r\n          card1status: true,\r\n          card1book: \"-\",\r\n          card2status: true,\r\n          card2book: \"-\",\r\n          card3status: true,\r\n          card3book: \"-\",\r\n          booklist: [],\r\n        });\r\n        alert(\"New Account Created, Please reload!\");\r\n        window.location.reload(false);\r\n\r\n        console.log(\"console log inside found==false statement\", imgList);\r\n      }\r\n      getbooklist();\r\n      setImgList(myNewList);\r\n    };\r\n\r\n    // fetchedRollno(props.scanResultWebCam);\r\n    // setCurrNo(props.scanResultWebCam)\r\n\r\n    getUserList();\r\n  }, []);\r\n\r\n  // const userRef = collection(db, \"users\");\r\n  // useEffect(() => {\r\n  //   const getCard = async () => {\r\n  //     const data = await getDocs(userRef);\r\n  //     console.log(\"hi\", data);\r\n  //     setProductList(data.docs.map((doc) => ({ ...doc.data(), id: doc.id })));\r\n  //   };\r\n\r\n  //   getProducts();\r\n  // }, []);\r\n\r\n  return loading === false ? (\r\n    <div className=\"flex flex-col items-center h-screen shadow-md\">\r\n      <Navbar />\r\n      <div className=\"m-auto text-2xl\">\r\n        <div className=\"bg-white p-6 text-white rounded-md shadow-md\">\r\n          {/* <p>STUDENT: DEB</p>\r\n          <p>ADMISSION NUMBER:8947</p> */}\r\n          <div className=\"bg-white p-3 px-6 text-green-500 mt-2 rounded-md space-y-4\">\r\n            {/* <AddWidget cardnumber={\"1\"} cardstatus={card1} />\r\n            <AddWidget cardnumber=\"2\" cardstatus={card2} />\r\n            <AddWidget cardnumber=\"3\" cardstatus={card3} /> */}\r\n\r\n            {imgList.map((item, key) => {\r\n              key = { key };\r\n              console.log(\"ITEM LOGGED IS \", item);\r\n              console.log(props.scanResultWebCam);\r\n\r\n              // console.log(\"inside function\");\r\n              //REPLACE 8947 WITH THE INT VALUE OBTAINED FROM QR CODE.\r\n              if (item.admno == props.scanResultWebCam) {\r\n                console.log(\"secondlist inside cardview return\", validbooklist);\r\n                console.log(\"ITEM ID IS \", item.id);\r\n                return (\r\n                  <>\r\n                    <AddWidget\r\n                      key={item.id}\r\n                      docid={item.id}\r\n                      name={item.name}\r\n                      admno={item.admno}\r\n                      card1status={item.card1status}\r\n                      card2status={item.card2status}\r\n                      card3status={item.card3status}\r\n                      card1book={item.card1book}\r\n                      card2book={item.card2book}\r\n                      card3book={item.card3book}\r\n                      booklist={item.booklist}\r\n                      validbooklist={validbooklist}\r\n                    />\r\n                    <BookShelf\r\n                      booklist={item.booklist}\r\n                      validbooklist={validbooklist}\r\n                    />\r\n                  </>\r\n                );\r\n              }\r\n            })}\r\n          </div>\r\n          {/* <div className=\"bg-green-400 rounded-md mt-4 p-2 text-center\">\r\n            ISSUAL HISTORY\r\n          </div> */}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <div className=\"flex flex-col items-center h-screen\">\r\n      <p className=\"text-green-500 text-[64px] my-4\">UNI-ID</p>\r\n      <div className=\"m-auto text-2xl\">\r\n        <div className=\"bg-green-500 p-3 text-white rounded-md shadow-md\">\r\n          <Loader2 />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","D:\\unid100\\Uni-D_2\\src\\components\\Landing.js",[],"D:\\unid100\\Uni-D_2\\src\\components\\BookShelf.js",["126","127","128","129","130","131"],"D:\\unid100\\Uni-D_2\\src\\components\\AddWidget.js",["132","133","134","135","136","137"],"import { arrayUnion, doc, setDoc, updateDoc } from \"firebase/firestore\";\r\nimport React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { db } from \"../firebase-config\";\r\nimport { Loader } from \"../pages/Loader\";\r\nimport { AvailIssue } from \"./AvailIssue\";\r\nimport { ListOfBooks } from \"./ListOfBooks\";\r\nimport { UnavailReturn } from \"./UnavailReturn\";\r\n\r\nexport const AddWidget = ({\r\n  docid,\r\n  name,\r\n  admno,\r\n  card1status,\r\n  card2status,\r\n  card3status,\r\n  card1book,\r\n  card2book,\r\n  card3book,\r\n  booklist,\r\n  validbooklist,\r\n}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  let visible2 = false;\r\n  const [visible, setVisible] = useState(false);\r\n  const [listview, setListview] = useState(false);\r\n  console.log(booklist);\r\n  const IssueBook = async (cnum, bname) => {\r\n    setLoading(true);\r\n    let cardbook = `card${cnum}book`;\r\n    let cardstatus = `card${cnum}status`;\r\n    let booklist = `booklist`;\r\n\r\n    const docRef = doc(db, \"users\", docid);\r\n\r\n    await updateDoc(docRef, {\r\n      [cardbook]: bname,\r\n      [cardstatus]: false,\r\n      // \"card1.bookname\": \"Coraline\",\r\n    });\r\n\r\n    try {\r\n      await updateDoc(docRef, {\r\n        booklist: arrayUnion(bname),\r\n      });\r\n    } catch (e) {\r\n      console.error(\"error adding\");\r\n    }\r\n\r\n    window.location.reload(false); //might have to change this way of reloading\r\n    setLoading(false);\r\n  };\r\n\r\n  const returnBook = async (cnum) => {\r\n    setLoading(true);\r\n    let cardbook = `card${cnum}book`;\r\n    let cardstatus = `card${cnum}status`;\r\n    const docRef = doc(db, \"users\", docid);\r\n    await updateDoc(docRef, {\r\n      [cardbook]: \"-\",\r\n      [cardstatus]: true,\r\n    });\r\n    window.location.reload(false); //might have to change this way of reloading\r\n    setLoading(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {loading === false ? (\r\n        <div className=\"flex flex-col space-y-2 text-gray-800\">\r\n          {/* {console.log(\"INSIDE ADDWIDGET \", validbooklist)} */}\r\n          <p className=\"font-xl text-center\">LIBRARY LOGS</p>\r\n          <p>Name: {name}</p>\r\n          <p>Admission Number: {admno}</p>\r\n          <div className=\"flex flex-col space-y-2\">\r\n            <div className=\"flex flex-row card bg-primary text-primary-content justify-center items-center space-x-4 rounded-md p-2\">\r\n              <p>CARD 1</p>\r\n\r\n              {card1status === true ? (\r\n                <AvailIssue\r\n                  IssueBook={IssueBook}\r\n                  validbooklist={validbooklist}\r\n                  cnum=\"1\"\r\n                />\r\n              ) : (\r\n                <UnavailReturn\r\n                  returnBook={returnBook}\r\n                  cnum=\"1\"\r\n                  cardbook={card1book}\r\n                />\r\n              )}\r\n            </div>\r\n            <div className=\"flex flex-row card bg-primary text-primary-content justify-center items-center space-x-4 bg-green-100 rounded-md p-2\">\r\n              <p >CARD 2</p>\r\n              {card2status === true ? (\r\n                <AvailIssue\r\n                  IssueBook={IssueBook}\r\n                  validbooklist={validbooklist}\r\n                  cnum=\"2\"\r\n                />\r\n              ) : (\r\n                <UnavailReturn\r\n                  returnBook={returnBook}\r\n                  cnum=\"2\"\r\n                  cardbook={card2book}\r\n                />\r\n              )}\r\n            </div>\r\n            <div\r\n              // onClick={() => updateItem(docid)}\r\n              className=\"flex flex-row card justify-center bg-primary text-primary-content items-center space-x-4 bg-green-100 rounded-md p-2\"\r\n            >\r\n              <p>CARD 3</p>\r\n              {card3status === true ? (\r\n                <AvailIssue\r\n                  IssueBook={IssueBook}\r\n                  validbooklist={validbooklist}\r\n                  cnum=\"3\"\r\n                />\r\n              ) : (\r\n                <UnavailReturn\r\n                  returnBook={returnBook}\r\n                  cnum=\"3\"\r\n                  cardbook={card3book}\r\n                />\r\n              )}\r\n            </div>\r\n            <button\r\n              className=\"rounded-md mt-4 p-2 text-center text-gray-800 hover:bg-green-300\"\r\n              onClick={() => {\r\n                if (visible === false) setVisible(true);\r\n                else setVisible(false);\r\n              }}\r\n            >\r\n              ISSUAL HISTORY\r\n            </button>\r\n          </div>\r\n\r\n          {visible && <ListOfBooks booklist={booklist} />}\r\n        </div>\r\n      ) : (\r\n        <Loader />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","D:\\unid100\\Uni-D_2\\src\\pages\\Loader.js",[],"D:\\unid100\\Uni-D_2\\src\\firebase-config.js",[],"D:\\unid100\\Uni-D_2\\src\\components\\Navbar.js",["138","139","140","141"],"import React from 'react'\r\n\r\nexport default function Navbar() {\r\n  return (\r\n    <div className=\"navbar bg-base-100\">\r\n        <div className=\"navbar-start\">\r\n            <div className=\"dropdown\">\r\n            <label tabIndex={0} className=\"btn btn-ghost btn-circle\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 6h16M4 12h16M4 18h7\" /></svg>\r\n            </label>\r\n            <ul tabIndex={0} className=\"menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52\">\r\n                <li><a>Homepage</a></li>\r\n                <li><a>Portfolio</a></li>\r\n                <li><a>About</a></li>\r\n            </ul>\r\n            </div>\r\n        </div>\r\n        <div className=\"navbar-center text-6xl\">\r\n            <a className=\"btn btn-ghost normal-case text-8xl\">unid</a>\r\n        </div>\r\n        <div className=\"navbar-end\">\r\n            <button className=\"btn btn-ghost btn-circle\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg>\r\n            </button>\r\n            <button className=\"btn btn-ghost btn-circle\">\r\n            <div className=\"indicator\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" /></svg>\r\n                <span className=\"badge badge-xs badge-primary indicator-item\"></span>\r\n            </div>\r\n            </button>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n","D:\\unid100\\Uni-D_2\\src\\pages\\Loader2.js",[],"D:\\unid100\\Uni-D_2\\src\\components\\AvailIssue.js",["142"],"import React, { useState } from \"react\";\r\n\r\nexport const AvailIssue = (props) => {\r\n  const [bookname, setBookname] = useState(\"\");\r\n  // const validbooklist = props.validbooklist;\r\n  // console.log(\"INSIDE AVAILISSUE IS \" + props.validbooklist);\r\n  let name;\r\n  return (\r\n    <section className=\"flex flex-row items-center justify-between space-x-20 p-2\">\r\n      <div className=\"flex card-action items-center justify-center bg-green-500 btn\">\r\n      <p className=\"flex items-center justify-center  text-2xl p-2  bg-green-500 text-white rounded-md\">\r\n        AVAILABLE\r\n      </p>\r\n      </div>\r\n      <div className=\"flex\">\r\n      <input\r\n        type=\"text\"\r\n        list=\"validbookids\"\r\n        display=\"none\"\r\n        className=\"flex py-1 px-2 rounded-md w-[250px] input stat placeholder:text-2xl\"\r\n        placeholder=\"enter book id\"\r\n        onChange={(e) => {\r\n          name = e.target.value;\r\n          setBookname(e.target.value);\r\n        }}\r\n      />\r\n      <datalist id=\"validbookids\">\r\n        {props.validbooklist.map((book, key) => (\r\n          <option key={key} value={book.id} />\r\n        ))}\r\n      </datalist>\r\n      </div>\r\n\r\n      <button\r\n        className=\"flex card-actions btn text-green-600 items-center text-3xl justify-center p-2 bg-base-100 hover:bg-green-600 hover:text-white\"\r\n        onClick={() => props.IssueBook(props.cnum, bookname)}\r\n      >\r\n       <p className=\"text-xl\">ISSUE</p>\r\n      </button>\r\n    </section>\r\n  );\r\n};\r\n","D:\\unid100\\Uni-D_2\\src\\components\\ListOfBooks.js",[],"D:\\unid100\\Uni-D_2\\src\\components\\SuggestedBook.js",["143","144","145"],"D:\\unid100\\Uni-D_2\\src\\components\\UnavailReturn.js",[],"D:\\unid100\\Uni-D_2\\src\\components\\BookItem.js",[],{"ruleId":"146","replacedBy":"147"},{"ruleId":"148","replacedBy":"149"},{"ruleId":"150","severity":1,"message":"151","line":4,"column":10,"nodeType":"152","messageId":"153","endLine":4,"endColumn":20},{"ruleId":"150","severity":1,"message":"154","line":5,"column":10,"nodeType":"152","messageId":"153","endLine":5,"endColumn":17},{"ruleId":"150","severity":1,"message":"155","line":10,"column":10,"nodeType":"152","messageId":"153","endLine":10,"endColumn":25},{"ruleId":"150","severity":1,"message":"156","line":13,"column":9,"nodeType":"152","messageId":"153","endLine":13,"endColumn":27},{"ruleId":"150","severity":1,"message":"157","line":16,"column":9,"nodeType":"152","messageId":"153","endLine":16,"endColumn":29},{"ruleId":"150","severity":1,"message":"158","line":19,"column":9,"nodeType":"152","messageId":"153","endLine":19,"endColumn":30},{"ruleId":"159","severity":1,"message":"160","line":43,"column":25,"nodeType":"161","messageId":"162","endLine":43,"endColumn":27},{"ruleId":"150","severity":1,"message":"163","line":2,"column":10,"nodeType":"152","messageId":"153","endLine":2,"endColumn":16},{"ruleId":"150","severity":1,"message":"164","line":6,"column":3,"nodeType":"152","messageId":"153","endLine":6,"endColumn":12},{"ruleId":"150","severity":1,"message":"165","line":7,"column":3,"nodeType":"152","messageId":"153","endLine":7,"endColumn":6},{"ruleId":"150","severity":1,"message":"166","line":8,"column":3,"nodeType":"152","messageId":"153","endLine":8,"endColumn":9},{"ruleId":"150","severity":1,"message":"167","line":10,"column":3,"nodeType":"152","messageId":"153","endLine":10,"endColumn":8},{"ruleId":"150","severity":1,"message":"168","line":11,"column":3,"nodeType":"152","messageId":"153","endLine":11,"endColumn":8},{"ruleId":"150","severity":1,"message":"169","line":15,"column":10,"nodeType":"152","messageId":"153","endLine":15,"endColumn":16},{"ruleId":"150","severity":1,"message":"170","line":15,"column":18,"nodeType":"152","messageId":"153","endLine":15,"endColumn":31},{"ruleId":"150","severity":1,"message":"171","line":16,"column":10,"nodeType":"152","messageId":"153","endLine":16,"endColumn":15},{"ruleId":"150","severity":1,"message":"172","line":16,"column":17,"nodeType":"152","messageId":"153","endLine":16,"endColumn":26},{"ruleId":"150","severity":1,"message":"173","line":17,"column":10,"nodeType":"152","messageId":"153","endLine":17,"endColumn":14},{"ruleId":"150","severity":1,"message":"174","line":17,"column":16,"nodeType":"152","messageId":"153","endLine":17,"endColumn":23},{"ruleId":"150","severity":1,"message":"175","line":18,"column":10,"nodeType":"152","messageId":"153","endLine":18,"endColumn":15},{"ruleId":"150","severity":1,"message":"176","line":18,"column":17,"nodeType":"152","messageId":"153","endLine":18,"endColumn":25},{"ruleId":"150","severity":1,"message":"177","line":19,"column":10,"nodeType":"152","messageId":"153","endLine":19,"endColumn":15},{"ruleId":"150","severity":1,"message":"178","line":19,"column":17,"nodeType":"152","messageId":"153","endLine":19,"endColumn":25},{"ruleId":"150","severity":1,"message":"179","line":20,"column":10,"nodeType":"152","messageId":"153","endLine":20,"endColumn":15},{"ruleId":"150","severity":1,"message":"180","line":20,"column":17,"nodeType":"152","messageId":"153","endLine":20,"endColumn":25},{"ruleId":"150","severity":1,"message":"181","line":24,"column":10,"nodeType":"152","messageId":"153","endLine":24,"endColumn":16},{"ruleId":"182","severity":1,"message":"183","line":58,"column":6,"nodeType":"184","endLine":58,"endColumn":8,"suggestions":"185"},{"ruleId":"186","severity":1,"message":"187","line":83,"column":33,"nodeType":"188","messageId":"189","endLine":83,"endColumn":35},{"ruleId":"159","severity":1,"message":"160","line":91,"column":30,"nodeType":"161","messageId":"162","endLine":91,"endColumn":32},{"ruleId":"150","severity":1,"message":"164","line":6,"column":3,"nodeType":"152","messageId":"153","endLine":6,"endColumn":12},{"ruleId":"150","severity":1,"message":"166","line":8,"column":3,"nodeType":"152","messageId":"153","endLine":8,"endColumn":9},{"ruleId":"150","severity":1,"message":"167","line":10,"column":3,"nodeType":"152","messageId":"153","endLine":10,"endColumn":8},{"ruleId":"150","severity":1,"message":"168","line":11,"column":3,"nodeType":"152","messageId":"153","endLine":11,"endColumn":8},{"ruleId":"150","severity":1,"message":"190","line":13,"column":10,"nodeType":"152","messageId":"153","endLine":13,"endColumn":23},{"ruleId":"150","severity":1,"message":"191","line":14,"column":10,"nodeType":"152","messageId":"153","endLine":14,"endColumn":16},{"ruleId":"150","severity":1,"message":"192","line":20,"column":10,"nodeType":"152","messageId":"153","endLine":20,"endColumn":15},{"ruleId":"150","severity":1,"message":"193","line":20,"column":17,"nodeType":"152","messageId":"153","endLine":20,"endColumn":25},{"ruleId":"150","severity":1,"message":"194","line":24,"column":9,"nodeType":"152","messageId":"153","endLine":24,"endColumn":21},{"ruleId":"150","severity":1,"message":"195","line":27,"column":9,"nodeType":"152","messageId":"153","endLine":27,"endColumn":19},{"ruleId":"150","severity":1,"message":"196","line":34,"column":9,"nodeType":"152","messageId":"153","endLine":34,"endColumn":20},{"ruleId":"150","severity":1,"message":"197","line":36,"column":9,"nodeType":"152","messageId":"153","endLine":36,"endColumn":16},{"ruleId":"186","severity":1,"message":"198","line":109,"column":28,"nodeType":"188","messageId":"199","endLine":109,"endColumn":30},{"ruleId":"159","severity":1,"message":"160","line":110,"column":24,"nodeType":"161","messageId":"162","endLine":110,"endColumn":26},{"ruleId":"159","severity":1,"message":"160","line":130,"column":18,"nodeType":"161","messageId":"162","endLine":130,"endColumn":20},{"ruleId":"182","severity":1,"message":"200","line":157,"column":6,"nodeType":"184","endLine":157,"endColumn":8,"suggestions":"201"},{"ruleId":"186","severity":1,"message":"187","line":182,"column":38,"nodeType":"188","messageId":"189","endLine":182,"endColumn":40},{"ruleId":"159","severity":1,"message":"160","line":189,"column":30,"nodeType":"161","messageId":"162","endLine":189,"endColumn":32},{"ruleId":"150","severity":1,"message":"202","line":3,"column":8,"nodeType":"152","messageId":"153","endLine":3,"endColumn":13},{"ruleId":"150","severity":1,"message":"203","line":7,"column":10,"nodeType":"152","messageId":"153","endLine":7,"endColumn":18},{"ruleId":"150","severity":1,"message":"204","line":8,"column":10,"nodeType":"152","messageId":"153","endLine":8,"endColumn":15},{"ruleId":"150","severity":1,"message":"205","line":8,"column":17,"nodeType":"152","messageId":"153","endLine":8,"endColumn":25},{"ruleId":"159","severity":1,"message":"160","line":30,"column":37,"nodeType":"161","messageId":"162","endLine":30,"endColumn":39},{"ruleId":"182","severity":1,"message":"206","line":99,"column":6,"nodeType":"184","endLine":99,"endColumn":8,"suggestions":"207"},{"ruleId":"150","severity":1,"message":"208","line":1,"column":27,"nodeType":"152","messageId":"153","endLine":1,"endColumn":33},{"ruleId":"150","severity":1,"message":"209","line":3,"column":20,"nodeType":"152","messageId":"153","endLine":3,"endColumn":29},{"ruleId":"150","severity":1,"message":"210","line":24,"column":7,"nodeType":"152","messageId":"153","endLine":24,"endColumn":15},{"ruleId":"150","severity":1,"message":"211","line":26,"column":10,"nodeType":"152","messageId":"153","endLine":26,"endColumn":18},{"ruleId":"150","severity":1,"message":"212","line":26,"column":20,"nodeType":"152","messageId":"153","endLine":26,"endColumn":31},{"ruleId":"150","severity":1,"message":"203","line":32,"column":9,"nodeType":"152","messageId":"153","endLine":32,"endColumn":17},{"ruleId":"213","severity":1,"message":"214","line":12,"column":21,"nodeType":"215","endLine":12,"endColumn":24},{"ruleId":"213","severity":1,"message":"214","line":13,"column":21,"nodeType":"215","endLine":13,"endColumn":24},{"ruleId":"213","severity":1,"message":"214","line":14,"column":21,"nodeType":"215","endLine":14,"endColumn":24},{"ruleId":"213","severity":1,"message":"214","line":19,"column":13,"nodeType":"215","endLine":19,"endColumn":63},{"ruleId":"150","severity":1,"message":"173","line":23,"column":11,"nodeType":"152","messageId":"153","endLine":23,"endColumn":15},{"ruleId":"150","severity":1,"message":"216","line":5,"column":10,"nodeType":"152","messageId":"153","endLine":5,"endColumn":18},{"ruleId":"150","severity":1,"message":"217","line":5,"column":20,"nodeType":"152","messageId":"153","endLine":5,"endColumn":31},{"ruleId":"218","severity":1,"message":"219","line":22,"column":11,"nodeType":"215","endLine":22,"endColumn":67},"no-native-reassign",["220"],"no-negated-in-lhs",["221"],"no-unused-vars","'Attendence' is defined but never used.","Identifier","unusedVar","'Landing' is defined but never used.","'currentFunction' is assigned a value but never used.","'handleClickLibrary' is assigned a value but never used.","'handleClickCafeteria' is assigned a value but never used.","'handleClickAttendence' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'addDoc' is defined but never used.","'deleteDoc' is defined but never used.","'doc' is defined but never used.","'getDoc' is defined but never used.","'query' is defined but never used.","'where' is defined but never used.","'rollno' is assigned a value but never used.","'fetchedRollno' is assigned a value but never used.","'admno' is assigned a value but never used.","'setAdmnno' is assigned a value but never used.","'name' is assigned a value but never used.","'setName' is assigned a value but never used.","'card1' is assigned a value but never used.","'setCard1' is assigned a value but never used.","'card2' is assigned a value but never used.","'setCard2' is assigned a value but never used.","'card3' is assigned a value but never used.","'setCard3' is assigned a value but never used.","'currNo' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'props.scanResultWebCam' and 'userRef'. Either include them or remove the dependency array. If 'setCurrNo' needs the current value of 'props.scanResultWebCam', you can also switch to useReducer instead of useState and read 'props.scanResultWebCam' in the reducer.","ArrayExpression",["222"],"array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","'RepeatRounded' is defined but never used.","'Loader' is defined but never used.","'found' is assigned a value but never used.","'setFound' is assigned a value but never used.","'mysecondlist' is assigned a value but never used.","'updateItem' is assigned a value but never used.","'displayList' is assigned a value but never used.","'addItem' is assigned a value but never used.","Array.prototype.map() expects a return value from arrow function.","expectedInside","React Hook useEffect has missing dependencies: 'imgList', 'props.scanNameWebCam', 'props.scanResultWebCam', and 'userRef'. Either include them or remove the dependency array.",["223"],"'axios' is defined but never used.","'booklist' is assigned a value but never used.","'index' is assigned a value but never used.","'setIndex' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'getList'. Either include it or remove the dependency array.",["224"],"'setDoc' is defined but never used.","'useEffect' is defined but never used.","'visible2' is assigned a value but never used.","'listview' is assigned a value but never used.","'setListview' is assigned a value but never used.","jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'bookname' is assigned a value but never used.","'setBookname' is assigned a value but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","no-global-assign","no-unsafe-negation",{"desc":"225","fix":"226"},{"desc":"227","fix":"228"},{"desc":"229","fix":"230"},"Update the dependencies array to be: [props.scanResultWebCam, userRef]",{"range":"231","text":"232"},"Update the dependencies array to be: [imgList, props.scanNameWebCam, props.scanResultWebCam, userRef]",{"range":"233","text":"234"},"Update the dependencies array to be: [getList]",{"range":"235","text":"236"},[1877,1879],"[props.scanResultWebCam, userRef]",[5077,5079],"[imgList, props.scanNameWebCam, props.scanResultWebCam, userRef]",[3372,3374],"[getList]"]